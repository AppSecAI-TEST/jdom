<project name="ant-demo" default="dist" basedir="." >

	<!-- define Maven coordinates -->
	<property name="groupId" value="org.jdom" />
	<property name="artifactId" value="jdom" />
	<property name="version" value="1.x-SNAPSHOT" />
	
	<property name="dist" value="dist" />

	<target name="build.core">
		<ant dir="core" target="package">
			<property name="version" value="${version}"/>
		</ant>
	</target>
	
	<target name="build.test">
		<echo message="Java Version - ${java.version} : Ant Version = ${ant.version}" />
		<ant dir="test" target="test" >
			<property name="jdom-core.jar" location="core/build/jdom-${version}.jar"/>
			<property name="version" value="${version}"/>
		</ant>
	</target>
	
	<target name="build.contrib">
		<ant dir="contrib" target="package" >
			<property name="jdom-core.jar" location="core/build/jdom-${version}.jar"/>
			<property name="version" value="${version}"/>
		</ant>
	</target>
	
	
	<target name="build" depends="build.core,build.test,build.contrib" />

	<target name="dist" depends="build" description="generate the distribution">

		<mkdir dir="${dist}" />
		<delete dir="${dist}" includes="*.jar"/>
		
		<copy todir="${dist}">
			<fileset dir="core/build" includes="*${version}*.jar"/>
			<fileset dir="test/build" includes="*${version}*.jar"/>
			<fileset dir="contrib/build" includes="*${version}*.jar"/>
		</copy>
		
	</target>

	<target name="clean" description="clean up">
		<delete dir="${dist}" />
	</target>

</project>